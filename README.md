# ğŸ§¬ Therapeutic Knowledge Graph + Idea2Stories

> A GenAI system that transforms biomedical knowledge graphs into clinical narratives using Claude on AWS Bedrock.

![Stack](https://img.shields.io/badge/Claude-Sonnet_3.5-00D4C8?style=flat-square)
![Stack](https://img.shields.io/badge/AWS-Bedrock_Â·_Neptune-F59E0B?style=flat-square)
![Stack](https://img.shields.io/badge/D3.js-Force_Graph-F43F5E?style=flat-square)
![Stack](https://img.shields.io/badge/React-18-3B82F6?style=flat-square)
![Markets](https://img.shields.io/badge/Markets-US_(FDA)_Â·_Japan_(PMDA)-8B5CF6?style=flat-square)

---

## What it does

This project combines a **biomedical knowledge graph** with **Claude-powered narrative generation** to assist medical writers, regulatory teams, and clinical researchers.

You select any entity from the graph â€” a drug, target, clinical study, or ML model â€” and the system traverses its relationships using Apache TinkerPop (Gremlin) graph queries, then passes the structured context to Claude to generate publication-ready clinical narratives.

**The key insight:** grounding LLM output in a knowledge graph eliminates hallucination. Every claim Claude generates is traceable to a specific vertex or edge in the graph.

---

## Features

- **Interactive Force Graph** â€” D3.js force-directed visualization of drugs, targets, papers, ML models, and regulatory bodies
- **Graph Traversal Context** â€” Each node exposes its Gremlin query before generation
- **Idea2Stories** â€” 5 narrative formats generated by Claude in real-time streaming:
  - ğŸ“‹ Research Brief (Medical Affairs)
  - ğŸ¥ Clinical Narrative (patient-centered)
  - ğŸ“„ Regulatory Dossier (ICH CTD language)
  - ğŸš€ Investor Pitch (BD&L framing)
  - ğŸ§µ Science Thread (public communication)
- **Dual-market support** â€” US (FDA) and Japan (PMDA) regulatory framing
- **Therapeutic areas** â€” ILD, Oncology, Cardiology with real compounds and trials
- **Clinical Dashboard** â€” Kaplan-Meier curves, forest plots, ROC curves, SHAP feature importance

---

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  React Frontend (D3 + Recharts)         â”‚
â”‚  Knowledge Graph Â· Clinical Dashboard Â· Story Panel     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              Idea2Stories (Prompt Engine)               â”‚
â”‚  Node context â†’ Gremlin traversal â†’ Claude prompt       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              Claude Sonnet (Anthropic API)               â”‚
â”‚  Streaming Â· Grounded in graph context Â· 5 formats      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          Knowledge Graph (Amazon Neptune model)         â”‚
â”‚  Vertices: Area Â· Target Â· Compound Â· Paper Â· Model     â”‚
â”‚  Edges: INHIBITS Â· STUDIES Â· VALIDATES Â· APPROVED_BY    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Production path:** This prototype uses React state for the graph. The production version connects to Amazon Neptune via Gremlin WebSocket, with documents stored in S3 and indexed in Bedrock Knowledge Bases for RAG retrieval.

---

## Graph Model

| Vertex Type  | Example              | Key Properties                  |
|-------------|----------------------|---------------------------------|
| `area`      | ILD, Oncology        | market (US/JP), papers count    |
| `target`    | TGF-Î², PD-1          | pathway, mechanism              |
| `compound`  | Nintedanib, Keytruda | moa, approved markets           |
| `paper`     | INPULSIS 2014        | journal, n, HR, year            |
| `model`     | ILD-Predict          | AUC, framework, training data   |
| `regulator` | FDA, PMDA            | market, submission format       |

| Edge Type     | Meaning                               |
|--------------|---------------------------------------|
| `INHIBITS`    | Compound â†’ Target (with IC50)         |
| `KEY_TARGET`  | Area â†’ Target (clinical priority)     |
| `STUDIES`     | Paper â†’ Compound (RCT evidence)       |
| `VALIDATES`   | Paper â†’ ML Model (external validation)|
| `APPROVED_BY` | Compound â†’ Regulator                  |
| `PREDICTS_IN` | ML Model â†’ Therapeutic Area           |

---

## Gremlin Query Examples

```groovy
// Find all compounds that inhibit fibrosis targets
g.V().hasLabel('Target').has('pathway', 'Fibrosis')
  .in('INHIBITS').hasLabel('Compound')
  .values('full')

// Full traversal: ILD â†’ targets â†’ compounds â†’ regulators
g.V('ILD').out('KEY_TARGET')
  .in('INHIBITS')
  .out('APPROVED_BY')
  .path().by('label').by('rel').by('full')

// Papers studying nintedanib with HR < 0.75
g.V('NINT').in('STUDIES')
  .has('hr', lt(0.75))
  .valueMap('full', 'journal', 'hr', 'n')
```

---

## Getting Started

```bash
git clone https://github.com/YOUR_USERNAME/therapeutic-knowledge-graph
cd therapeutic-knowledge-graph
npm install
```

Create a `.env` file:

```env
VITE_ANTHROPIC_API_KEY=your_api_key_here
```

> âš ï¸ API key is used client-side for demo purposes only. In production, route all LLM calls through a backend service.

```bash
npm run dev
```

---

## Files

```
â”œâ”€â”€ kg_idea2stories.jsx               # KG + Claude narrative generation (main app)
â”œâ”€â”€ therapeutic_knowledge_graph.jsx   # Interactive D3 force graph with learn mode
â”œâ”€â”€ therapeutic_dashboard.jsx         # Clinical data visualization dashboard
â””â”€â”€ README.md
```

---

## What I learned building this

This project was built to explore **graph databases** â€” an area I identified as a gap coming into a GenAI role in clinical research.

Key learnings:
- Property graph model vs. RDF triples â€” why pharma prefers TinkerPop
- Gremlin traversal patterns for multi-hop biomedical queries
- Why grounding LLM output in a KG is critical for regulatory contexts
- Dual-market complexity: FDA vs. PMDA framing requires different narrative structure, not just translation

**Next iteration:** Connect to a real Neptune cluster, ingest PubMed abstracts via Bedrock Knowledge Bases, and add a MedDRA/J mapping layer for the Japanese market.

---

## Tech Stack

| Layer | Technology |
|-------|-----------|
| Frontend | React 18, D3.js v7, Recharts |
| LLM | Claude Sonnet 3.5 (Anthropic API / AWS Bedrock) |
| Graph (prod) | Amazon Neptune, Apache TinkerPop 3.x |
| Storage (prod) | S3, Bedrock Knowledge Bases, OpenSearch Serverless |

---

## Author

**Andrea Libertella**
Accessibility Specialist â†’ GenAI Developer
*Building at the intersection of clinical science, AI, and inclusive design*

---

*Built with Claude Code Â· February 2026*
